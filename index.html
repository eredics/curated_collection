<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline';
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
        font-src 'self' https://fonts.gstatic.com;
        img-src 'self' data:;
        connect-src 'self';
        form-action 'self';
        base-uri 'self';
        object-src 'none'
    ">
    <!-- Ensure proper rendering and touch zooming on mobile devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- For iOS web applications -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!-- For mobile web app capability -->
    <meta name="mobile-web-app-capable" content="yes">
    <title>Curated Collection</title>
    <!-- Add manifest for PWA -->
    <link rel="manifest" href="manifest.json">
    <!-- Link to our stylesheet -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Skip link for accessibility -->
    <a href="#app-content" class="skip-link">Skip to main content</a>
    
    <!-- Splash screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <h1 class="splash-title">Federation Gallery</h1>
            <h2 class="splash-date" id="splash-date"></h2>
            <p class="splash-curator">Curated by Claude Haiku 3.5</p>
            <div class="splash-loader">
                <div class="splash-loader-bar"></div>
            </div>
        </div>
    </div>
    
    <!-- Main application container -->
    <div id="app">
        <!-- View components will be rendered here -->
        <header id="app-header" role="banner"></header>
        <main id="app-content" role="main"></main>
        <footer id="app-footer" role="contentinfo"></footer>
    </div>
    
    <!-- Screen reader announcer -->
    <div id="sr-announcer" class="sr-only" aria-live="polite"></div>
    
    <!-- Scripts loaded in specific order at the end of body -->
    <script src="js/libs/papaparse.min.js"></script>
    <script src="js/constants.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/failsafe.js"></script>
    <script src="js/template-engine.js"></script>
    <script src="js/component.js"></script>
    <script src="js/data-binding.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/router.js"></script>
    <script src="js/data-loader.js"></script>
    <script src="js/image-handler.js"></script>
    <script src="js/main.js"></script>
    
    <!-- Initialize application -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize splash screen
            const dateElement = document.getElementById('splash-date');
            const options = { 
                weekday: 'long',
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            dateElement.textContent = new Date().toLocaleDateString(undefined, options);
            
            // Hide splash screen after animation completes
            setTimeout(() => {
                const splashScreen = document.getElementById('splash-screen');
                splashScreen.classList.add('hidden');
                
                // Remove splash screen from DOM after transition
                setTimeout(() => {
                    splashScreen.remove();
                }, 500);
            }, 1800);
        });
    </script>
</body>
</html>